<div class="student-management">
  <h2>Existing Students</h2>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let student of students">
        <td>{{ student.name }}</td>
        <td>{{ student.email }}</td>
        <td class="actions">
          <button class="btn view-btn" (click)="onViewEnrollments(student)">View Enrollments</button>
          <button class="btn delete-btn" (click)="onDeleteStudent(student.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="students.length === 0" class="empty-placeholder">
    No students have registered yet.
  </div>
</div>
<!-- :white_check_mark: Modal Popup -->
<div *ngIf="isModalVisible" class="modal-overlay" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeModal()">Ã—</button>
    <h3>Enrollments for {{ selectedStudent?.name }}</h3>
    <!-- :white_check_mark: Scrollable table wrapper -->
    <div class="table-scroll-container" *ngIf="selectedStudentEnrollments.length > 0; else noEnrollments">
      <table class="enrollments-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Course Title</th>
            <th>Course ID</th>
            <th>Enrolled At</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let enrollment of selectedStudentEnrollments; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ enrollment.course?.title || 'Course Title Missing' }}</td>
            <td>{{ enrollment.courseId }}</td>
            <td>{{ enrollment.enrolledAt | date: 'medium' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <ng-template #noEnrollments>
      <p>This student is not enrolled in any courses.</p>
    </ng-template>
  </div>
</div>
<app-common-modal></app-common-modal>